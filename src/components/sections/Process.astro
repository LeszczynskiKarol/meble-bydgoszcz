---
import type { ProcessStep } from '../../lib/types';

export interface Props {
  title: string;
  subtitle?: string;
  steps: ProcessStep[];
}

const { title, subtitle, steps } = Astro.props;
---

<section class="process">
  <div class="container">
    <div class="section-header">
      <h2>{title}</h2>
      {subtitle && <p>{subtitle}</p>}
    </div>
    
    <div class="process-grid">
      {steps.map((step, index) => (
        <div class="process-card">
          <div class="process-number">
            <span>{step.number || index + 1}</span>
          </div>
          <h3>{step.title}</h3>
          <p>{step.description}</p>
          {index < steps.length - 1 && (
            <div class="process-arrow">→</div>
          )}
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .process {
    @apply py-20 px-4 sm:px-6 lg:px-8 bg-white mb-20;
  }

  .container {
    @apply max-w-7xl mx-auto;
  }

  .section-header {
    @apply text-center mb-16;
  }

  .section-header h2 {
    @apply text-4xl font-bold text-primary mb-4 relative inline-block;
  }

  .section-header h2::after {
    @apply content-[''] absolute -bottom-2 left-1/2 -translate-x-1/2 w-20 h-1 bg-secondary rounded-full;
  }

  .section-header p {
    @apply text-xl text-gray-600 max-w-2xl mx-auto mt-6;
  }

  .process-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mt-12;
  }

  .process-card {
    @apply bg-white p-8 rounded-2xl shadow-md text-center relative transition-all duration-300;
  }

  .process-card:hover {
    @apply -translate-y-2 shadow-xl;
  }

  .process-number {
    @apply w-16 h-16 bg-gradient-to-br from-secondary-400 to-secondary-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg;
    position: relative;
  }

  /* Dodajemy bardziej specyficzne style dla numeru */
  .process-number span {
    @apply text-2xl font-bold text-white;
    display: block;
    line-height: 1;
  }

  /* Alternatywny sposób - użycie pseudo-elementu z numerem */
  .process-number::after {
    content: attr(data-number);
    @apply absolute inset-0 flex items-center justify-center text-2xl font-bold text-white;
    pointer-events: none;
  }

  .process-card h3 {
    @apply text-primary mb-4 text-xl font-bold;
  }

  .process-card p {
    @apply text-gray-600 leading-relaxed;
  }

  .process-arrow {
    @apply absolute top-1/2 -right-10 -translate-y-1/2 text-3xl text-secondary hidden lg:block;
    z-index: 1;
  }

  @media (min-width: 1024px) {
    .process-card:not(:last-child) .process-arrow {
      @apply block;
    }
  }

  @media (max-width: 1200px) {
    .process-grid {
      @apply grid-cols-2 max-w-3xl mx-auto;
    }
  }

  @media (max-width: 600px) {
    .process-grid {
      @apply grid-cols-1 max-w-md mx-auto;
    }
  }
</style>